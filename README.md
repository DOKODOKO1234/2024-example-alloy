**検証対象のOSS**

今回、自分が選んだOSSはPassboltというパスワード管理・共有OSSである。
githubのリポジトリURLは
https://github.com/passbolt
である。

**検証すべき性質**

今回検証する性質はPassboltの公式ページに乗っているソフトウェアの特徴から選んだ。
公式ホームページのURLは
https://www.passbolt.com
である。

Passboltには管理者と一般ユーザーがあり、管理者は自分が持っているパスワードを自分のチームメンバーと友だちへ共有することができる。
また、一般ユーザーは友達のみに共有することができる。
パスワードには有効期限を設定することが可能であり、それをすぎると使用することができない。
もちろん、他人が共有していないパスワードにはアクセスすることができない。

これをモデル化する。

**Alloyによる形式化**


パスワードとして複数の文字列を使用している。
管理者と一般ユーザーを区別するためにRoleシグネチャーを用意している。
ユーザーの属性にはどのパスワードを持っているか、友達、役割がある。
パスワードの属性には内容、共有された友達、有効期限、使用できる部署の情報が含まれている。
部署の属性にはメンバーがある。

・それぞれのパスワードの文字列は重複しないことをUniquePasswordContentで確認している。

・パスワードを持っているユーザーはそのパスワードを共有できることをEnsureShareRangeで確認している。

・すべてのユーザーはパスワードを持っていることをEnsureUsersHavePasswordsにて確認している。

・部署には必ずメンバーが配属されていることをEnsureTeamHaveMembersにて確認している。

・自分自身が友達に入っていないことをNoSelfFriend似て確認している。

・有効なパスワードはすべてどこかの部署で使えることをEnsurePasswordsHaveTeamsにて確認している。

・期限切れのパスワードは使えないことをEnshureInvalidPasswordsCannotAccessTeamsにて確認している。

・管理者が一人だけ存在することをEnshureAdminにて確認している。

・パスワードは必ず期限を持つことをEnsureExpirationFlagにて確認している。

・一般ユーザーが共有できるのは友達に入っている人だけということをSharingRuleにて確認している。

・管理者は所属している部署のメンバーとその友達に共有できることをAdminPassSharingにて確認している。

・一般ユーザーが存在することをEnsureGeneralUserExistsで確認している。

・一般ユーザーは友達にのみ、自分のパスワードを共有できることをGeneralUserCanOnlyUseOwnPasswordsにて確認している。

**検証手法**

本モデルの検証にはAlloyのアサーションを用いた。
パスワードの使用期限と管理者の権限に関する性質について確認を行った。

*前提条件*

実行にあたっては前提条件として10人のユーザー、5つのチーム、5つのパスワードが存在しているとした。

・AdminCanSharePasswordsにて管理者が共有できているのは自分のチームのメンバーと友達だけか確認している。

・InvalidPasswordCannotAccessTeamsにて使用期限を過ぎたパスワードに所属する部署がないか確認している。

Alloyによる実行の結果、インスタンスが存在し、すべてのアサーションが満たされていることを確認した。
